<?xml version="1.0" encoding="utf-8"?>

<mx:Panel
	xmlns:mx="http://www.adobe.com/2006/mxml"
	layout="vertical"
	horizontalAlign="center"
	paddingBottom="5" title="Date Range" creationPolicy="all"
	creationComplete="onCreationComplete();">
	
	<mx:Script>
		<![CDATA[
			import com.adobe.lineup.events.GetAppointmentsEvent;
			import com.adobe.lineup.model.ModelLocator;
			import com.adobe.utils.DateUtil;

			private function onCreationComplete():void
			{
			}

			public function onGetSchedule():void
			{
				var gae:GetAppointmentsEvent = new GetAppointmentsEvent();
				gae.startDate = dateRange.selectedRanges[0].rangeStart;
				gae.endDate = dateRange.selectedRanges[0].rangeEnd;
				gae.updateUI = true;
				gae.dispatch();
			}

			public function getTodaysSchedule():void
			{
				var gae:GetAppointmentsEvent = new GetAppointmentsEvent();
				gae.startDate = new Date();
				gae.endDate = new Date();
				gae.updateUI = true;
				gae.dispatch();
			}

			public function getThisWeekSchedule():void
			{
				var gae:GetAppointmentsEvent = new GetAppointmentsEvent();
				gae.startDate = new Date();
				gae.endDate = new Date(gae.startDate.time + (60 * 60 * 24 * 7 * 1000)); // One week
				gae.updateUI = true;
				gae.dispatch();
			}

		]]>
	</mx:Script>
	
	<mx:DateChooser
		id="dateRange"
		width="100%" height="100%"
		allowMultipleSelection="true"
		selectedRanges="{[{'rangeStart':ModelLocator.getInstance().calStartDate,'rangeEnd':ModelLocator.getInstance().calEndDate}]}"/>

	<mx:Button label="Get Schedule" width="100%" click="onGetSchedule();"/>

</mx:Panel>
